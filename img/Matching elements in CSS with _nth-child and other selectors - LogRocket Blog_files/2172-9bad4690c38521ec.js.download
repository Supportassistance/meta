"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2172,3076],{6867:function(e,t,n){var o,r,i=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var a=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e),o||(o=i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 3.5v4.713h-4.685",vectorEffect:"non-scaling-stroke"})),r||(r=i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.524 8.213c-1.402-2.584-4.127-4.338-7.26-4.338C7.7 3.875 4 7.597 4 12.188c0 4.59 3.7 8.312 8.264 8.312 3.469 0 6.438-2.15 7.664-5.195",vectorEffect:"non-scaling-stroke"})))};t.Z=a},34347:function(e,t,n){var o,r=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),o||(o=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.707 1.293a1 1 0 0 0-1.414 1.414l20 20a1 1 0 0 0 1.414-1.414l-1.944-1.944a14.2 14.2 0 0 0 2.037-7.35c0-3.104-.994-5.98-2.68-8.323a1.099 1.099 0 0 0-1.783 1.282A12.008 12.008 0 0 1 20.603 12a12.01 12.01 0 0 1-1.45 5.74l-1.6-1.6A8.742 8.742 0 0 0 18.59 12a8.742 8.742 0 0 0-1.576-5.018 1.099 1.099 0 0 0-1.801 1.255A6.548 6.548 0 0 1 16.393 12a6.56 6.56 0 0 1-.487 2.491L13.2 11.786v-8.47c0-1.29-1.521-1.978-2.49-1.126L6.928 5.515 2.707 1.293Zm-1.27 6.165c.167-.348.413-.644.713-.863l11.05 11.05v3.038c0 1.29-1.521 1.979-2.49 1.127l-4.316-3.795s-.151-.161-.19-.198l-.002-.003h-.004a6.564 6.564 0 0 0-.266-.003h-1.93c-.276 0-.544 0-.771-.02a2.099 2.099 0 0 1-.84-.233 2.258 2.258 0 0 1-.953-1.016 2.472 2.472 0 0 1-.22-.895c-.018-.242-.018-.527-.018-.82V9.173c0-.294 0-.58.018-.821.02-.266.069-.58.22-.895Z",clipRule:"evenodd"})))};t.Z=l},29578:function(e,t,n){var o,r=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),o||(o=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.2 3.317c0-1.29-1.521-1.979-2.49-1.127L6.393 5.985a6.948 6.948 0 0 1-.19.198l-.002.003h-.004a6.337 6.337 0 0 1-.266.003h-1.93c-.276 0-.544 0-.77.02-.25.022-.545.073-.84.233-.411.223-.745.579-.954 1.016-.151.316-.2.63-.22.895-.018.242-.018.527-.018.82V14.827c0 .294 0 .58.019.821.02.266.068.58.219.895.209.437.543.793.953 1.015.296.161.59.213.84.234.227.02.495.02.77.02h1.93c.143 0 .215 0 .267.003h.004l.002.003c.039.037.19.198.19.198l4.316 3.795c.968.852 2.49.164 2.49-1.127V3.317Zm5.387.109a1.099 1.099 0 0 1 1.533.25A14.203 14.203 0 0 1 22.8 12c0 3.105-.994 5.981-2.68 8.324a1.099 1.099 0 0 1-1.783-1.282A12.008 12.008 0 0 0 20.603 12c0-2.63-.84-5.06-2.266-7.042a1.097 1.097 0 0 1 .25-1.532Zm-3.102 3.283a1.099 1.099 0 0 1 1.53.273A8.742 8.742 0 0 1 18.59 12a8.742 8.742 0 0 1-1.576 5.018 1.099 1.099 0 0 1-1.801-1.256A6.548 6.548 0 0 0 16.393 12c0-1.4-.436-2.696-1.18-3.763a1.097 1.097 0 0 1 .272-1.528Z",clipRule:"evenodd"})))};t.Z=l},77357:function(e,t,n){n.d(t,{Z:function(){return eg}});var o,r,i,l=n(98788),a=n(42838),s=n(70865),u=n(96670),c=n(66383),d=n(5163),p=n(52322),f=n(269),v=n(92642),h=n(72779),m=n.n(h),g=n(25237),x=n.n(g),y=n(2784),b=n(53476),w=n(97818),S=n(49748);function j(e){return 1e3*Math.max(2.5*e*.03,2.5)}var C=n(64989),k=n(80537),N=n.n(k),Z=n(78646),I=n(16283),E=n(15529),T=n(76790),O=n(60058),F=n(79826),R=n(79984);function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var M=function(e){return y.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),o||(o=y.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 15-6-6-6 6",vectorEffect:"non-scaling-stroke"})))},H=n(6867),z=n(34883);function L(e){var t,n=e.hotspot,o=e.navToNextStep,r=e.replay,i=(0,C.u)(),l=i.flow,a=i.activeStep,c=(0,b.sJ)(S.H.navInfo),d=(0,y.useMemo)(function(){return(0,E.q)(l)},[l]),f=d.buttonBgColor,v=d.buttonFgColor,h=(null==n?void 0:n.label)||"",g=(null==n?void 0:n.bgColor)||f,x=(null==n?void 0:n.textColor)||v,j=(0,y.useRef)(null),k=(0,y.useState)(0),N=k[0],Z=k[1],I=(0,y.useState)(!1),T=I[0],A=I[1],L=!(0===h.length||!j.current||(null===(t=j.current)||void 0===t?void 0:t.clientHeight)===18);return(0,y.useEffect)(function(){var e;L&&Z(((null===(e=j.current)||void 0===e?void 0:e.clientHeight)||0)+18)},[h,T,L]),(0,y.useEffect)(function(){return A(!1)},[a]),(0,p.jsxs)("div",(0,u.Z)((0,s.Z)({},(0,z.v)("Caption")),{className:m()("absolute -bottom-10 left-0 right-0 h-10 w-full transition-all ease flex justify-center rounded-b-lg select-none",{"items-start":!T,"items-center":T}),style:{backgroundColor:g,color:x,zIndex:(0,O.LM)(O.KN.Caption),height:T?N:F.zI},onMouseOver:function(){!(0,w.tq)()&&L&&A(!0)},onMouseLeave:function(){!(0,w.tq)()&&L&&A(!1)},onClick:function(){(0,w.tq)()&&L&&A(!T)},children:[(0,p.jsx)("div",{className:m()("absolute w-7 h-5 flex items-center justify-center -top-5 rounded-t-lg cursor-pointer",{hidden:!L}),style:{backgroundColor:g,color:x},children:(0,p.jsx)(M,{className:m()("w-4 h-4 transition-all origin-center",{"!rotate-180":T})})}),(0,p.jsx)("div",{className:"flex-none font-bold text-xs h-10 w-10 flex items-center justify-center",children:"".concat(c.stepIndex+1,"/").concat(c.stepCount)}),(0,p.jsxs)("div",{className:m()("flex-grow h-10 py-[10px] relative",{"flex items-center":T,"h-10 overflow-hidden":!T}),children:[(0,p.jsx)("div",{className:m()("absolute transition-all bottom-0 right-0 left-0 w-full h-3 select-none pointer-events-none",{"opacity-0":T,"opacity-50":!T}),style:{backgroundColor:g}}),(0,p.jsx)("div",{ref:j,className:m()("text-sm select-none leading-[18px]",{"h-5":0===h.length,"mt-[1px]":!T}),children:h})]}),(0,p.jsx)("div",{className:"w-10 h-10 cursor-pointer flex-none flex items-center justify-center",onClick:function(){c.stepIndex+1!==c.stepCount?o():r()},children:c.stepIndex+1!==c.stepCount?(0,p.jsx)(R.Z,{className:"h-6 w-6"}):(0,p.jsx)(H.Z,{className:"h-5 w-5"})})]}))}n(80754);var B=n(33252),P=n(90258),D=n(56873),V=n(53994),U=n(66626),W=function(e){var t=e.color,n=e.textColor,o=e.content,r=void 0===o?"":o,i=e.inEditMode,l=e.displayAsCaption;return i||!l?(0,p.jsxs)("div",{className:"hostpot-target min-w-[200px] max-w-[300px] relative rounded-lg h-auto inline-block shadow-hotBox transition-transform group/callout","aria-label":"callout button","data-mouseover-override-enabled-on-panandzoom":"true",style:{backgroundColor:t},children:[(0,p.jsx)("div",{className:m()("absolute inset-0 z-[-10] rounded-[10px] opacity-0  transition-all ease-[cubic-bezier(0.4, 0, 0.2, 1)]",{"group-hover/callout:opacity-20 group-hover/callout:-inset-2":!i}),style:{backgroundColor:t}}),(0,p.jsxs)("div",{className:"p-4 flex flex-col gap-4 items-start justify-between",children:[(0,p.jsx)("div",{className:m()("",{"opacity-50":i&&!r}),style:{color:n},children:i&&!r?"Explain the benefits...":(0,p.jsx)(U.I,{text:r})}),(0,p.jsx)("div",{className:"flex items-center justify-center rounded-lg w-12 h-9 shrink-0 transition-width anim-scale",style:{backgroundColor:n,color:t},children:(0,p.jsx)(R.Z,{className:"flex w-[18px] h-[18px]"})})]})]}):null},_=n(11761),q=x()(function(){return Promise.all([n.e(7720),n.e(4578)]).then(n.bind(n,84578))},{loadableGenerated:{webpack:function(){return[84578]}}}),J=function(e){var t,n=e.callout,o=e.inEditMode,r=e.onCalloutClick,i=e.updateCallout,l=e.deleteCallout,d=e.displayAsCaption,f=e.tracker,v=e.stageRef,h=e.isZoomActive,g=(0,y.useRef)(null),x=(0,C.u)(),j=x.fontFamily,k=x.activeStep,N=(0,c.Z)((0,b.FV)(S.H.selectedHotspot),2),Z=N[0],I=N[1],E=(0,b.Zl)(S.H.selectedHotspotIsDirty),T=(0,b.rb)(S.H.selectedHotspot),F=(0,b.sJ)(S.H.stageDimensions),R=(0,b.Zl)(S.H.shake),A=(0,c.Z)((0,b.FV)(S.H.selectingTarget),2),M=A[0],H=A[1],z=(0,b.sJ)(S.H.isAnimationActive),L=(0,b.Zl)(S.H.isHistoryNav),U=(0,y.useState)(Z),J=U[0],K=U[1],G="tippy-".concat(n.id,"-edit"),X="tippy-".concat(n.id,"-view"),Y=(0,y.useState)("hide"),Q=Y[0],$=Y[1],ee=(0,y.useState)(!1),et=ee[0],en=ee[1],eo=(0,y.useState)({x:0,y:0}),er=eo[0],ei=eo[1],el=(0,y.useState)({x:0,y:0}),ea=el[0],es=el[1],eu=(0,y.useState)(void 0),ec=eu[0],ed=eu[1],ep=!!J&&J.id===n.id;(0,y.useEffect)(function(){K(Z)},[Z]),(0,y.useEffect)(function(){E(!!(null==J?void 0:J.isDirty))},[null==J?void 0:J.isDirty,E]);var ef=(0,P.z)(function(e){var t;return ei({x:e.clientX,y:e.clientY})},[],50);(0,V.s)(ep,function(e){if((0,a.Z)(e,KeyboardEvent))(null==J?void 0:J.isDirty)?R(!0):T();else{var t=M&&Array.from(document.getElementsByClassName("_step-selector-step")).find(function(t){return t.contains(e.target)});(null==J?void 0:J.isDirty)?t||R(!0):T()}},{keyboardEvents:["Escape"]});var ev=(0,y.useCallback)(function(e){if(ec)return ec;var t=new ResizeObserver(e);return ed(t),t},[ec]),eh=n.x*F.width,em=n.y*F.height,eg=null!==(ej=n.bgColor&&!o?n.bgColor:n.id===(null==J?void 0:J.id)?null==J?void 0:J.bgColor:n.bgColor)&&void 0!==ej?ej:B.defaultUserPrefs.bgColor,ex=null!==(eC=n.id===(null==J?void 0:J.id)?null==J?void 0:J.textColor:n.textColor)&&void 0!==eC?eC:B.defaultUserPrefs.textColor,ey=n.id===(null==J?void 0:J.id)?null==J?void 0:J.label:n.label,eb=o&&!(null==J?void 0:J.isDirty);if(g.current&&v.current&&!h){var ew,eS,ej,eC,ek,eN,eZ=null===(ek=g.current)||void 0===ek?void 0:ek.getBoundingClientRect(),eI=null===(eN=v.current)||void 0===eN?void 0:eN.getBoundingClientRect(),eE=eh+eZ.width,eT=em+eZ.height;eE>eI.width&&(eh=eh-(eE-eI.width)-10),eT>eI.height&&(em=em-(eT-eI.height)-10)}var eO=function(e){($("hide"),o)?(e.stopPropagation(),(null==J||!J.isDirty)&&(ep||I(n))):r&&(e.stopPropagation(),L(!1),r(n))},eF=function(e){if(o){var t,n=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect();es({x:n?e.clientX-n.x:0,y:n?e.clientY-n.y:0}),e.dataTransfer.dropEffect="none",en(!0),$("hide"),document.addEventListener("dragover",ef)}},eR=function(){var e,t=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect();if(o&&t){document.removeEventListener("dragover",ef);var r=(0,w.BD)(er.x-ea.x,er.y-ea.y,F,{top:t.top,left:t.left}),l=r.x,a=r.y;i&&i((0,u.Z)((0,s.Z)({},n),{x:(0,w.jz)(l,F),y:(0,w.OW)(a,F)})),setTimeout(function(){en(!1),$("show")},50)}},eA=function(e){var t;null===(t=e.popperInstance)||void 0===t||t.forceUpdate(),o&&setTimeout(function(){null===(t=e.popperInstance)||void 0===t||t.forceUpdate();var t,n=ev(function(){var t;return null===(t=e.popperInstance)||void 0===t?void 0:t.forceUpdate()}),o=document.querySelector(".".concat(_.Vs));o&&n.observe(o)},50)},eM=function(){var e=document.querySelector(".".concat(_.Vs));e&&(null==ec||ec.unobserve(e))},eH=null;ep&&J&&(eH=(0,p.jsx)(q,{className:m()({hidden:et}),currentHotspot:J,setCurrentHotspot:K,onClose:function(){T(),$("show"),H(!1)},updateHotspot:i,deleteHotspot:l,tracker:f}));var ez=(0,p.jsx)("div",{className:"select-none",style:{width:"auto",fontFamily:j},children:(0,p.jsx)(W,{content:ey,textColor:ex,color:eg,inEditMode:o,displayAsCaption:d})});return(0,p.jsxs)("div",{className:"w-full h-full absolute top-0 left-0",children:[(0,p.jsx)("style",{children:"\n        .".concat(X,", .").concat(G," {\n          background-color: initial;\n          color: initial;\n          border-radius: initial;\n          font-size: initial;\n          outline: initial;\n        }\n        .").concat(X," .tippy-arrow,\n        .").concat(G," .tippy-arrow {\n          color: transparent !important;\n        }\n        .").concat(X," .tippy-content,\n        .").concat(G," .tippy-content {\n          padding: 0;\n        }\n        [data-tippy-root] {\n          pointer-events: auto !important;\n        }\n      ")}),(0,p.jsx)("div",{ref:g,className:m()("cursor-pointer absolute flex justify-center items-center",{"transition-transform transform-gpu duration-500 ease delay-100":!o}),"data-transition":"true",style:(0,s.Z)({transformOrigin:"left top",transform:"translate(".concat(eh,"px, ").concat(em,"px) scale(").concat(h?1/((null==k?void 0:null===(ew=k.panAndZoom)||void 0===ew?void 0:ew.enabled)?(null==k?void 0:null===(eS=k.panAndZoom)||void 0===eS?void 0:eS.zoomLevel)||1.5:1):1,")"),zIndex:(0,O.LM)(O.KN.HotspotComponent)},et?{transition:"0.01s",transform:"translateX(-9999px)"}:{}),onClick:eO,draggable:eb,onDragStart:eF,onDragEnd:eR,children:(0,p.jsx)(D.ZP,{visible:ep||"show"===Q||!eH&&!z,interactive:!1,placement:"auto",className:o?G:X,zIndex:(0,O.LM)(O.KN.HotspotComponent,2),popperOptions:eH?{modifiers:[{name:"flip",options:{fallbackPlacements:["top","bottom","right","left"],boundary:v.current}},{name:"preventOverflow",options:{boundary:v.current,mainAxis:!0,altAxis:!0}},]}:void 0,offset:[0,-10],duration:[null,0],animation:"shift-away",content:eH,onShow:eA,onHide:eM,arrow:!0,appendTo:null!==(t=v.current)&&void 0!==t?t:void 0,plugins:[D.CA],sticky:!0,children:ez})})]})},K=n(57001),G=function(e){var t=e.hotspots,n=e.addHotspot,o=e.updateHotspot,r=e.deleteHotspot,i=e.onHotspotClick,l=e.inEditMode,a=e.tracker,u=e.isZoomActive,c=e.zoomStyles,d=e.stageRef,f=(0,b.sJ)(S.H.stageDimensions),v=(0,b.sJ)(S.H.selectedHotspot),h=(0,b.sJ)(S.H.mobileInfo).isScreenSizeSmall,g=(0,y.useRef)(null),x=function(e){if((null==v||!v.isDirty)&&n&&l&&d.current){var t=d.current.getBoundingClientRect();if(t){var o=(0,w.BD)(e.clientX,e.clientY,f,{top:t.top,left:t.left}),r=o.x,i=o.y;n({coords:{x:(0,w.jz)(r,f),y:(0,w.OW)(i,f)}})}}};return(0,p.jsxs)("div",{className:"".concat(_.gq," relative select-none flex w-full h-full"),onDoubleClick:x,style:(0,s.Z)({},c),children:[l&&(0,p.jsx)("div",{ref:g,className:m()("absolute -top-full -left-full -z-1 rounded-full"),style:{width:_.jH,height:_.jH}}),t.map(function(e,t){return"callout"===e.style?(0,p.jsx)(J,{callout:e,onCalloutClick:i,inEditMode:!!l,updateCallout:o,deleteCallout:r,tracker:a,stageRef:d,displayAsCaption:h,isZoomActive:u},t):(0,p.jsx)(K.Z,{hotspot:e,onHotspotClick:i,displayAsCaption:h,inEditMode:!!l,updateHotspot:o,deleteHotspot:r,tracker:a,stageRef:d,isZoomActive:u,dragCircleRef:g},t)})]})},X=n(23238),Y=n(29150),Q=n(1316),$=n(27697);function ee(){return(ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var et=function(e){return y.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},e),r||(r=y.createElement("path",{fillRule:"evenodd",d:"M9.207 1.293a1 1 0 0 0-1.414 1.414L8.086 3 3.028 8.057c-.372.373-.694.695-.937.981-.257.303-.485.631-.616 1.035a3 3 0 0 0 0 1.854c.131.404.359.732.616 1.035.243.286.565.608.937.98l3.53 3.53c.372.372.694.694.98.937.303.257.631.485 1.035.616a3 3 0 0 0 1.854 0c.404-.131.732-.36 1.035-.616.286-.243.608-.565.98-.937l4.656-4.656a9.18 9.18 0 0 0 .488-.511c.148-.175.308-.397.402-.687.13-.402.13-.834 0-1.236a2.021 2.021 0 0 0-.402-.686 9.19 9.19 0 0 0-.488-.512l-7.89-7.891zM9.5 4.414l-5.03 5.03c-.223.223-.403.403-.55.556h11.166L9.5 4.414z",clipRule:"evenodd"})),i||(i=y.createElement("path",{d:"M20.5 12a1 1 0 0 1 .694.28 9.079 9.079 0 0 1 .34.34c.2.208.468.5.74.833.27.329.558.719.785 1.122.211.375.441.886.441 1.425a3 3 0 0 1-6 0c0-.54.23-1.05.441-1.425.227-.403.516-.793.785-1.122a14.08 14.08 0 0 1 1.08-1.173.995.995 0 0 1 .694-.28zm-18 9a1 1 0 1 0 0 2h12a1 1 0 1 0 0-2h-12z"})))},en=n(96589),eo=n(75475),er=n(30803),ei=n(47842),el=n(26297);function ea(e){var t,n=e.display,o=void 0===n||n,r=e.fadeIn,i=void 0!==r&&r,l=e.fadeOut,a=void 0!==l&&l,c=e.duration,d=void 0===c?500:c,f=e.className,v=e.children,h=(0,el.Z)(e,["display","fadeIn","fadeOut","duration","className","children"]),g=(0,y.useState)(!o),x=g[0],b=g[1],w=(0,y.useState)(!i),S=w[0],j=w[1];return(0,y.useEffect)(function(){if(j(o),a&&!o){var e=setTimeout(function(){b(!0)},d);return function(){return clearTimeout(e)}}b(!o)},[o,a,d]),(0,p.jsx)("div",(0,u.Z)((0,s.Z)({className:m()((t={},(0,ei.Z)(t,"transition-opacity duration-".concat(d),i||a),(0,ei.Z)(t,"hidden",x),t),S?"opacity-100":"opacity-0",f)},h),{children:v}))}var es=n(26868),eu=n(71869);function ec(e){var t=e.step,n=e.className,o=e.style,r=e.isLastStep,i=e.inEditMode,l=e.isActive,a=e.isSmallScreenOrTile,d=e.overlayControlsRef,v=e.updateStep,h=e.onButtonClick,g=e.onOverlayUrlClick,x=(0,eo.Z)(),j=(0,C.u)().fontFamily,k=(0,y.useState)(t),N=k[0],Z=k[1];(0,y.useEffect)(function(){Z(t)},[t]);var I=N.title,E=N.subtitle,T=N.buttonText,F=N.buttonColor,R=N.buttonTextColor,A=N.buttonType,M=N.actionUrl,H=N.theme,z=N.blur,L=void 0===z?f.OverlayBlur.Medium:z,P=(0,c.Z)((0,Y.G)(!1,300),2),D=P[0],V=P[1],W=(0,y.useCallback)(function(e){Z(function(t){return(0,s.Z)({},t,e)})},[]);(0,y.useEffect)(function(){r||"url"!==A||(W({buttonType:"next_step"}),null==v||v({buttonType:"next_step"}))},[A,r,W,v]);var _=(0,Q.y)(function(e){return null==v?void 0:v(e)},[v],500),q=(0,b.sJ)(S.H.mobileInfo).isScreenSizeSmall,J=H===f.OverlayTheme.Dark,K=F||x.hotspotDefaults.backgroundColor||B.defaultUserPrefs.bgColor,G=R||x.hotspotDefaults.textColor||(0,w.pK)(K);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ea,{className:"absolute inset-0",style:o,display:l,fadeOut:!i,children:(0,p.jsx)("div",{className:m()("flex flex-col items-center justify-center w-full h-full",{"bg-gray-900/70":J,"bg-white/70":!J,"backdrop-blur-sm":L===f.OverlayBlur.Small,"backdrop-blur-md":L===f.OverlayBlur.Medium,"backdrop-blur-none":L===f.OverlayBlur.None,"rounded-b-lg":!q||i},n),children:(0,p.jsxs)("div",{className:"flex flex-col flex-grow w-full items-center justify-center px-10",children:[(i||I)&&(0,p.jsx)("h2",{className:m()("flex font-bold break-words	text-center justify-center w-full",[J?"text-white":"text-gray-900"],[a?"text-lg mb-2":"text-3xl mb-4"]),style:{fontFamily:j},children:i?(0,p.jsx)(en.Z,{className:m()("text-3xl font-bold outline-none bg-transparent border-0 ring-0 p-0 resize-none select-all focus:ring-0 w-full text-center",[J?"text-white placeholder-white placeholder-opacity-50":"text-gray-900 placeholder-gray-900 placeholder-opacity-50",]),style:{fontFamily:j},placeholder:"Title",value:null!=I?I:"",onFocus:function(e){return e.target.select()},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:function(e){var t=e.target.value;W({title:t}),_({title:t})}}):I||(a?"Title":"")}),(i||E)&&(0,p.jsx)("p",{className:m()("flex items-center justify-center text-center w-full",[J?"text-white":"text-gray-900"],[a?"text-xs mb-4":"text-base mb-6"]),style:{fontFamily:j},children:i?(0,p.jsx)(en.Z,{itemType:"text",className:m()("text-base outline-none bg-transparent border-0 ring-0 placeholder-gray-200 p-0 resize-none select-all focus:ring-0 w-full text-center",[J?"text-white placeholder-white placeholder-opacity-50":"text-gray-900 placeholder-gray-900 placeholder-opacity-50",]),style:{fontFamily:j},placeholder:"Subtitle",value:E||"",onFocus:function(e){return e.target.select()},onChange:function(e){var t=e.target.value;W({subtitle:t}),_({subtitle:t})}}):(0,p.jsx)(U.I,{text:E})||(a?"Subtitle":"")}),(0,p.jsx)("a",{className:"flex",href:i||"url"!==A?void 0:M,target:"_blank",rel:"noreferrer",children:(0,p.jsxs)("button",{className:m()("font-semibold relative rounded-lg transition-all no-animation opacity-100","bg-transparent text-gray-900 hover:bg-gray-100 active:bg-gray-200",i?"":"hover:opacity-80 active:opacity-90",a?"min-h-[32px] text-sm px-3 py-1":"min-h-[48px] text-base px-4 py-2",{"px-8":i}),style:{backgroundColor:K,color:G},onClick:function(e){e.stopPropagation(),i||("next_step"===A&&h?h():"url"===A&&g())},tabIndex:i?-1:void 0,children:[(0,p.jsxs)("div",{className:"flex items-center justify-center",children:[i?(0,p.jsx)(er.Z,{label:"",colors:[{value:null!=K?K:"",label:"Button color",onChange:function(e){W({buttonColor:e,buttonTextColor:""}),null==v||v({buttonColor:e,buttonTextColor:""})}},{value:null!=G?G:"",label:"Text color",onChange:function(e){W({buttonTextColor:e}),null==v||v({buttonTextColor:e})}},],containerClassName:"",pickerClassName:"absolute top-[30px] left-[50%] translate-x-[-50%]",renderLabel:function(e){var t=e.labelRef,n=e.onClick;return(0,p.jsx)("div",{className:"absolute left-4 top-4",ref:t,onClick:n,children:(0,p.jsx)(et,{className:"h-[18px] w-[18px]"})})}}):null,i?(0,p.jsx)(en.Z,{className:m()("text-base font-semibold outline-none bg-transparent border-0 border-transparent ring-0 p-0 resize-none select-all focus:ring-0 text-center max-w-[150px]",{"placeholder-[rgba(255,255,255,.3)]":K&&G.toLowerCase().startsWith("#fff"),"placeholder-[rgba(0,0,0,.3)]":K&&G.startsWith("#000")}),style:{fontFamily:j},placeholder:"Button",value:T,onFocus:function(e){e.target.select()},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:function(e){e.stopPropagation(),e.preventDefault();var t=e.target.value;W({buttonText:t}),_({buttonText:t})}}):T]}),!i&&(0,p.jsx)("div",{className:"absolute inset-0 animate-pingSmall rounded-xl -z-10 border",style:{borderColor:K},children:(0,p.jsx)("div",{className:"absolute inset-0 rounded-xl opacity-[.12]",style:{boxShadow:"0 0 0 4px ".concat(K)}})})]})})]})})}),d&&(0,p.jsx)(es.Z,{targetRef:d,children:i&&v&&t.type===f.StepType.Overlay&&l&&(0,p.jsxs)("div",(0,u.Z)((0,s.Z)({className:"hidden sm:flex w-full justify-center flex-col md:flex-row items-center gap-3 lg:gap-6 p-0.5 shrink-0 rounded-lg bg-gray-50"},(0,O.i8)(O.KN.OverlayControls)),{children:[(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Theme"}),(0,p.jsx)(ed,{configs:[{id:f.OverlayTheme.Dark,label:"Dark"},{id:f.OverlayTheme.Light,label:"Light"},],selectedConfigId:H,onSelect:function(e){W({theme:e}),v({theme:e})},isDark:J})]}),(0,p.jsx)("div",{className:"hidden lg:flex w-px h-8 bg-gray-200"}),(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Blur"}),(0,p.jsx)(ed,{configs:[{id:f.OverlayBlur.None,label:"Off"},{id:f.OverlayBlur.Small,label:"S"},{id:f.OverlayBlur.Medium,label:"M"},],selectedConfigId:L,onSelect:function(e){W({blur:e}),v({blur:e})},isDark:J})]}),(0,p.jsx)("div",{className:"hidden lg:flex w-px h-8 bg-gray-200"}),(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Destination"}),(0,p.jsx)(ed,{configs:[{id:"next_step",label:r?"First step":"Next step"},{id:"url",label:"URL",disabled:!r||!x.mayUseURLDestinationInOverlay,disabledTooltipText:x.mayUseURLDestinationInOverlay?"URL destinations are only available on an Arcade’s last step":"URL destinations are only available on paid plans",containsTextInput:!0,textInputValue:M,onTextInputChange:function(e){W({actionUrl:e});var t=e.trim();t.startsWith("https://")||t.startsWith("http://")||(t="https://".concat(t));var n=!!t&&!(0,w.u1)(t);V(n),n?v({actionUrl:""}):v({actionUrl:t})},invalidTextInput:D,invalidTextInputTooltip:"Please enter a valid URL"},],selectedConfigId:A,onSelect:function(e){W({buttonType:e}),v({buttonType:e})},isDark:J})]})]}))})]})}function ed(e){var t=e.configs,n=e.selectedConfigId,o=e.onSelect;return n||(n=t[0].id),(0,p.jsx)("div",{className:"flex gap-1 items-center justify-center rounded-[10px] bg-gray-100 p-1 shrink-0",children:t.map(function(e){var t=e.id,r=e.label,i=e.disabled,l=e.disabledTooltipText,a=e.containsTextInput,s=e.textInputValue,u=e.onTextInputChange,c=e.invalidTextInput,d=e.invalidTextInputTooltip,f=t===n;return(0,p.jsx)("div",{className:m()("flex justify-center items-center px-3 h-8 shrink-0 rounded-lg cursor-pointer border transition-all min-w-[32px]",{"bg-white border-gray-200 hover:bg-gray-50":f,"bg-gray-100 border-gray-100 hover:bg-gray-200":!f&&!i,"bg-gray-100 border-gray-100":i}),onClick:function(){return!i&&!f&&o(t)},children:(0,p.jsxs)("div",{className:m()("flex items-center text-xs font-semibold shrink-0 text-gray-900",{"text-gray-500":i}),children:[r,a&&f&&(0,p.jsx)(eu.Z,{placement:"top",interactive:!0,appendTo:function(){return document.body},maxWidth:300,text:d||"",disabled:!c||!d,visible:!0,children:(0,p.jsx)("input",{type:"url",className:m()("text-xs bg-transparent max-w-md border-0 outline-none focus:outline-none focus:ring-0",c?"text-critical-action":"text-gray-900"),value:s,onChange:function(e){null==u||u(e.target.value)},placeholder:"https://example.com",autoFocus:!0})}),i&&l&&(0,p.jsx)(eu.Z,{placement:"top",interactive:!0,appendTo:function(){return document.body},maxWidth:300,text:l,children:(0,p.jsx)("div",{children:(0,p.jsx)($.Z,{className:m()("ml-[6px] cursor-pointer transition-colors w-3 h-3 hover:text-gray-700 text-gray-500")})})})]})},t)})})}var ep=n(50776),ef=x()(function(){return n.e(76).then(n.bind(n,80076))},{loadableGenerated:{webpack:function(){return[80076]}}}),ev=x()(function(){return n.e(839).then(n.bind(n,30839))},{loadableGenerated:{webpack:function(){return[30839]}}}),eh=x()(function(){return Promise.all([n.e(5338),n.e(7592),n.e(9050)]).then(n.bind(n,7592))},{loadableGenerated:{webpack:function(){return[7592]}}}),em=x()(function(){return Promise.all([n.e(2341),n.e(6515)]).then(n.bind(n,86515))},{loadableGenerated:{webpack:function(){return[86515]}}}),eg=function(e){var t,n,o,r,i,h,g,x,k,R,A,M,H,z,B,P,D,V,U,W,_,q,J,K,Y,Q,$,ee=e.flow,et=e.updateStep,en=e.updateHotspot,eo=e.deleteHotspot,er=e.addHotspot,ei=e.updateCTA,el=e.isWatermarkDisplayed,ea=e.inEditMode,es=void 0!==ea&&ea,eu=e.disableCTA,ed=e.disableNavigation,eg=e.disablePlayButton,ex=void 0!==eg&&eg,ey=e.disableTracking,eb=void 0!==ey&&ey,ew=e.tracker,eS=e.onSplitVideo,ej=e.videoControlsRef,eC=e.overlayControlsRef,ek=e.stageRef,eN=e.exportMode,eZ=e.children,eI=(0,y.useRef)(!1),eE=(0,y.useRef)(null),eT=(0,C.u)(),eO=eT.hasBackground,eF=eT.hasWrapper,eR=eT.activeStep,eA=eT.setActiveStep,eM=(0,b.sJ)(S.H.isFullscreen),eH=(0,b.sJ)(S.H.hotspotInspectorIsOpen),ez=(0,b.sJ)(S.H.historyStack),eL=(0,b.sJ)(S.H.stageDimensions),eB=(0,c.Z)((0,b.FV)(S.H.selectedHotspot),2),eP=eB[0],eD=eB[1],eV=(0,b.Zl)(S.H.firstStepContentIsReady),eU=(0,Z.ZP)({steps:ee.steps,activeStep:eR}),eW=eU.renderedSteps,e_=eU.renderedInteractiveSteps,eq=eU.setPotentialNextStep,eJ=(0,y.useState)(!1),eK=eJ[0],eG=eJ[1],eX=(0,y.useState)(!1),eY=eX[0],eQ=eX[1],e$=(0,y.useState)(!1),e0=e$[0],e1=e$[1],e2=(0,b.Zl)(S.H.isAnimationActive),e3=null!=eR?eR:ee.steps[0],e4=(0,y.useMemo)(function(){return ee.steps.findIndex(function(e){return e.id===(null==e3?void 0:e3.id)})},[null==e3?void 0:e3.id,ee.steps]),e5=(D=(P={src:ee.backgroundMusicUrl,enabled:!es,hasArcadeEnded:(0,I.Is)(ee,e3.id),duckingEnabled:e3.type===f.StepType.Video&&!e3.muted}).src,V=P.enabled,U=P.hasArcadeEnded,W=P.duckingEnabled,_=(0,y.useRef)(),J=(q=(0,c.Z)((0,b.FV)(S.H.isMuted),2))[0],K=q[1],(0,y.useEffect)(function(){!_.current&&V&&D&&(_.current=new Audio(D),_.current.volume=.6,_.current.loop=!0,_.current.onplay=function(){_.current&&(_.current.volume=.6),K(!1)},_.current.onpause=function(){return K(!0)},_.current.pause())},[V,K,D]),(0,y.useEffect)(function(){if(!V){var e;null===(e=_.current)||void 0===e||e.pause(),_.current=void 0}},[V]),Y=(0,y.useRef)(),Q=(0,y.useCallback)(function(e){if(_.current){var t=_.current;if(t.volume>0){var n=(Math.round(1e3*e)-1)/1e3;try{t.volume=n}catch(o){}Y.current=setTimeout(function(){return Q(n)},10)}else clearTimeout(Y.current),Y.current=void 0,t.pause(),t.volume=.6,t.currentTime=0}},[]),(0,y.useEffect)(function(){if(U){var e;Q((null===(e=_.current)||void 0===e?void 0:e.volume)||.6)}else Y.current&&(clearTimeout(Y.current),Y.current=void 0,_.current&&_.current.volume)},[Q,U]),(0,y.useEffect)(function(){if(_.current){var e=_.current;W?e.volume=.1:e.volume=.6}},[W]),(0,y.useEffect)(function(){_.current&&(J?_.current.muted=!0:_.current.muted=!1)},[J]),{playBackgroundMusic:function(){var e;return V&&(null===(e=_.current)||void 0===e?void 0:e.play())}}).playBackgroundMusic,e8=(0,y.useCallback)(($=(0,l.Z)(function(e){var t,n,o,r,i,l,a,s;return(0,d.__generator)(this,function(u){switch(u.label){case 0:if(es)return[2];if(e5(),!(t=(null==e?void 0:e.targetId)&&(null==e?void 0:e.targetId)!==F.xv?ee.steps.find(function(t){return t.id===e.targetId}):ee.steps.slice(e4+1).find(function(e){return e.type!==f.StepType.Empty})||ee.steps[0]))return[3,5];if(e3.type!==f.StepType.Image&&t.type===f.StepType.Image&&e2(!1),t.type!==f.StepType.Video||!(n=document.getElementById(t.id)))return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,n.play()];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),(0,v.Tb)(o),[3,4];case 4:eA(t.id),(t.type===f.StepType.Image||t.type===f.StepType.Overlay)&&ez.add(t.id),u.label=5;case 5:return!es&&ee.status===f.PublishStatus.published&&e3&&(e?ew.report("Hotspot Clicked",{stepId:null!==(r=e3.id)&&void 0!==r?r:"",hotspotId:e.id,hotspotLabel:e.label,targetStepId:t?e.targetId:"Unassigned"}):ew.report("Overlay Clicked",{stepId:null!==(i=e3.id)&&void 0!==i?i:"",title:null!==(l=e3.title)&&void 0!==l?l:"",subtitle:null!==(a=e3.subtitle)&&void 0!==a?a:"",buttonLabel:null!==(s=e3.buttonText)&&void 0!==s?s:"",linkType:"button",linkUrl:"",isCta:!1})),[2]}})}),function(e){return $.apply(this,arguments)}),[es,ee.status,ee.steps,e3,e4,eA,ez,e2,ew,]),e9=(0,y.useCallback)((0,l.Z)(function(){var e,t,n,o,r;return(0,d.__generator)(this,function(i){return es||ee.status===f.PublishStatus.published&&e3&&ew.report("Overlay Clicked",{stepId:null!==(e=e3.id)&&void 0!==e?e:"",title:null!==(t=e3.title)&&void 0!==t?t:"",subtitle:null!==(n=e3.subtitle)&&void 0!==n?n:"",buttonLabel:null!==(o=e3.buttonText)&&void 0!==o?o:"",linkType:"link",linkUrl:null!==(r=e3.actionUrl)&&void 0!==r?r:"",isCta:!0}),[2]})}),[e3,ee.status,es,ew]);(0,y.useEffect)(function(){if(!eR){var e=es?ee.steps[0]:(0,T.kB)(ee.steps);e&&(eA(e.id),(null==ez?void 0:ez.add)&&e&&ez.add(e.id))}},[ee.id,ez]);var e6=(0,y.useCallback)(function(e){return 0===ee.steps.findIndex(function(t){return t.id===e})},[ee.steps]);(0,y.useEffect)(function(){if(es&&!eK&&!eP&&ee.created.toISOString()===ee.modified.toISOString()&&e6(e3.id)){var e,t=null===(e=e3.hotspots)||void 0===e?void 0:e[0];t&&(eG(!0),eD(t))}},[eP,e3.hotspots,e3.id,ee.created,ee.modified,es,e6,eD,eK,]),(0,y.useEffect)(function(){eI.current||e6(e3.id)||(eI.current=!0)},[e3.id,e6]);var e7,te,tt,tn,to,tr,ti,tl,ta,ts,tu,tc,td,tp,tf,tv,th,tm,tg,tx,ty,tb,tw,tS,tj,tC,tk,tN,tZ,tI,tE,tT,tO=(0,b.sJ)(S.H.mobileInfo),tF=tO.isScreenSizeSmall,tR=tO.isMobile,tA=(0,y.useMemo)(function(){return(0,E.q)(ee)},[ee]).buttonBgColor,tM=(0,y.useMemo)(function(){return(0,Z.sc)(ee.steps)},[ee.steps]),tH=(te=(0,C.u)().activeStep,tn=(tt=(0,c.Z)((0,b.FV)(S.H.navInfo),2))[0],to=tt[1],(0,y.useEffect)(function(){var e=null!=te?te:tM[0];to({stepCount:tM.length,stepIndex:tM.findIndex(function(t){return t.id===e.id})})},[te,to,tM]),tn),tz=(ti=(tr={enabled:!es&&ee.autoplay&&!eN,activeStep:eR,onNextStep:e8}).enabled,tl=tr.activeStep,ta=tr.onNextStep,tu=(ts=(0,c.Z)((0,b.FV)(S.H.isAutoplayActive),2))[0],tc=ts[1],td=(0,b.Zl)(S.H.isAnimationActive),tp=(0,b.sJ)(S.H.isArcadeFrameVisible),tv=(tf=(0,y.useState)(null))[0],th=tf[1],tm=(0,y.useCallback)(function(){tv&&clearTimeout(tv),th(null),tc(!1)},[tc,tv]),(0,y.useEffect)(function(){ti&&tu||tm()},[ti,tm,tu]),(0,y.useEffect)(function(){ti&&tc(!0)},[ti,tc]),(0,y.useEffect)(function(){var e;tl&&tp&&(tl.type===f.StepType.Image||tl.type===f.StepType.Overlay)&&th(setTimeout(function(){var e;td(!0),ta((null==tl?void 0:null===(e=tl.hotspots)||void 0===e?void 0:e[0])||void 0)},(e=tl,e.type===f.StepType.Image?j(e.hotspots.reduce(function(e,t){return t.defaultOpen?e+t.label.length:e},0)):e.type===f.StepType.Overlay?j([e.title,e.subtitle,e.buttonText].join("").length):void 0)))},[tl,ta,tc,td,tp,]),(0,y.useEffect)(function(){return function(){tv&&clearTimeout(tv)}},[tv]),{turnOffAutoplay:function(){return tc(!1)}}).turnOffAutoplay,tL=(0,y.useCallback)(function(e){tz(),e5(),ew.report("Progress Bar Nav Clicked",{fromStepId:e3.id,toStepId:e.id}),e.type===f.StepType.Image&&e3.type===f.StepType.Image?e2(!0):e2(!1),eA(e.id)},[e3.id,e3.type,e5,eA,e2,tz,ew,]),tB=(0,y.useCallback)(function(){var e=tH.stepIndex;if(e!==tH.stepCount-1){var t=(e+1)%tM.length;tL(tM[t]),ew.report("Navigated With Arrow Right Key",{fromStepId:e3.id,toStepId:tM[t].id})}},[e3.id,tH.stepCount,tH.stepIndex,tM,tL,ew,]),tP=(0,y.useCallback)(function(){var e=tH.stepIndex;if(0!==e){var t=e-1<0?tM.length-1:e-1;tL(tM[t]),ew.report("Navigated With Arrow Left Key",{fromStepId:e3.id,toStepId:tM[t].id})}},[e3.id,tH.stepIndex,tM,tL,ew,]),tD=(0,y.useMemo)(function(){var e;return((null==eR?void 0:eR.type)===f.StepType.Image||(null==eR?void 0:eR.type)===f.StepType.Video)&&!!(null==eR?void 0:null===(e=eR.panAndZoom)||void 0===e?void 0:e.enabled)},[null==eR?void 0:null===(t=eR.panAndZoom)||void 0===t?void 0:t.enabled,null==eR?void 0:eR.type]),tV=(ty=void 0===(tx=(tg={position:{x:null!==(H=null==eR?void 0:null===(n=eR.hotspots)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.x)&&void 0!==H?H:0,y:null!==(z=null==eR?void 0:null===(r=eR.hotspots)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.y)&&void 0!==z?z:0,left:null==eR?void 0:null===(h=eR.panAndZoom)||void 0===h?void 0:null===(g=h.position)||void 0===g?void 0:g.left,top:null==eR?void 0:null===(x=eR.panAndZoom)||void 0===x?void 0:null===(k=x.position)||void 0===k?void 0:k.top},containerDimensions:{width:eL.width,height:eL.height},zoomLevel:null!==(B=null==eR?void 0:null===(R=eR.panAndZoom)||void 0===R?void 0:R.zoomLevel)&&void 0!==B?B:1.5,triggerOnChange:eR,shouldZoom:tD&&(!es||eY)}).zoomLevel)?1.5:tx,tb=tg.position,tw=tg.triggerOnChange,tS=tg.shouldZoom,tj=tg.containerDimensions,tk=(tC=(0,c.Z)((0,b.FV)(S.H.zoomBox),2))[0],tN=tC[1],(0,y.useEffect)(function(){return tN(function(e){return(0,u.Z)((0,s.Z)({},e),{zoomLevel:ty})})},[tN,ty]),tZ=(0,y.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;tN({top:0,left:0,height:tj.height,width:tj.width,zoomLevel:e})},[tj.height,tj.width,tN]),tI=(0,y.useCallback)(function(){var e=tj.width,t=tj.height,n=e/ty,o=t/ty;if(!N()(tb.top)&&!N()(tb.left)){var r=tb.x,i=tb.y,l=r<=1?r*e:r,a=i<=1?i*t:i,s=(l-n/2)*ty,u=(a-o/2)*ty;s=(s=s/ty+n>e?s-l/2+(n*ty-l):s)<0?0:s,tN({top:-(u=(u=u/ty+o>t?u-a/2+(o*ty-a):u)<0?0:u),left:-s,height:o,width:n,zoomLevel:ty})}N()(tb.top)&&N()(tb.left)&&tN({top:tb.top*t,left:tb.left*e,height:o,width:n,zoomLevel:ty})},[tj.height,tj.width,tb.left,tb.top,tb.x,tb.y,tN,ty,]),(0,y.useEffect)(function(){return tI()},[tw,tS,tI,tZ]),tE=(0,y.useMemo)(function(){return{transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.4, 0, .2, 1)",transitionDuration:"600ms",transform:tS?"translate3d(".concat(tk.left,"px, ").concat(tk.top,"px, 0) scale(").concat(tk.zoomLevel,")"):"translate3d(0px, 0px, 0) scale(1)",transformOrigin:"0 0",willChange:"transform"}},[tk.left,tk.top,tk.zoomLevel,tS]),tT=(0,y.useMemo)(function(){return!!(tk.zoomLevel>1&&tS)},[tS,tk.zoomLevel]),{zoomIn:tI,zoomOut:tZ,setZoomBox:tN,zoomStyles:tE,zoomLevel:ty,zoomBox:tk,isZoomActive:tT}),tU=tV.zoomIn,tW=tV.zoomOut,t_=tV.zoomBox,tq=tV.zoomStyles,tJ=tV.isZoomActive,tK=(0,y.useCallback)(function(e){var t,n=e.clientX,o=e.clientY,r=null==document?void 0:null===(t=document.elementsFromPoint)||void 0===t?void 0:t.call(document,n,o);if((null==r?void 0:r.length)&&r.slice(0,10).find(function(e){return(0,a.Z)(e,HTMLElement)&&"mouseoverOverrideEnabledOnPanandzoom"in e.dataset})){e1(!0);return}!eH&&e1(!1)},[eH]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{ref:ek,className:m()("relative group flex w-full h-full",{"cursor-zoom-out":tJ&&tD&&!es,"cursor-zoom-in":!tJ&&tD&&!es,"overflow-hidden":!eH,"border border-1 border-[rgba(0,0,0,0.1)] rounded-lg":!tF&&!tR&&!eF,"rounded-b-lg":!tF&&!tR}),onClick:function(e){tz(),e.stopPropagation(),tJ&&tD&&!es?tW():tU(),e5()},onMouseMove:function(e){var t;return es&&(null==eR?void 0:null===(t=eR.panAndZoom)||void 0===t?void 0:t.enabled)&&!eY&&tK(e)},children:[(0,p.jsxs)(ep.Z,{className:m()("absolute select-none z-0 flex w-full h-full",{"overflow-hidden":!tF&&!tR&&!eF,"overflow-hidden rounded-b-lg":es&&eF}),style:(0,s.Z)({},tq,eM?{}:{height:eL.height}),transitionType:"transform",waitUntilAllGlobalTransitionsEnd:!0,onTransitionStart:function(){return e2(!0)},onTransitionEnd:function(){return e2(!1)},children:[(0,p.jsx)("div",{className:m()("relative flex w-full h-full",{"overflow-hidden":!eF&&(eO&&!tF||es)}),style:{zIndex:es?"":"-1"},children:eW.map(function(e){var t=e.step,n=e.isActive,o=e.onLoad;return t.type===f.StepType.Image?(0,p.jsx)(X.Z,{src:t.url,alt:t.name,layout:"fill",onLoadingComplete:function(){o(),eV(!0)},className:m()("absolute top-0 w-full object-cover h-full flex",{"opacity-100 transition-none":n&&eI.current,"opacity-100 transition-opacity duration-1000":n&&!eI.current,"opacity-0 z-[-99999999]":!n}),blurhash:t.blurhash,priority:n,sizes:"(min-width: 1em) 100vw, 100vw"},"image-".concat(t.id)):t.type===f.StepType.Video?(0,p.jsx)(eh,{step:t,disablePlayButton:ex,disableTracking:eb,inEditMode:es,isActive:n,className:"w-full h-full flex",isBehindOverlay:e3.type===f.StepType.Overlay,tracker:ew,onReady:function(){o(),eV(!0)},onEnded:es?void 0:function(){e2(!1),ew.report("Video Ended",{stepId:t.id})},onSplitVideo:eS,videoControlsRef:ej,exportMode:eN},"video-".concat(t.id,"-").concat(t.url,"-").concat(t.streamUrl)):void 0})}),eZ]}),e_.map(function(e){var t,n=e.step,o=e.isActive;if(n.type===f.StepType.Overlay)return(0,p.jsx)(ec,{className:m()({"rounded-lg overflow-hidden flex w-full h-full":!tF&&!tR&&!eF}),style:(0,s.Z)({},(0,O.m)(O.KN.Overlay)),step:n,isLastStep:n.id===(null===(t=ee.steps[ee.steps.length-1])||void 0===t?void 0:t.id),inEditMode:es,isActive:o,isSmallScreenOrTile:tF&&!es,updateStep:et,onButtonClick:function(){tz(),e8()},onOverlayUrlClick:function(){tz(),e9()},overlayControlsRef:eC},"overlay-".concat(n.id))}),tD&&es&&(0,p.jsx)(em,(0,u.Z)((0,s.Z)({},t_),{updateStep:et,previewOn:eY,zoomEditorRef:eE,mouseIsOnTopOfHotspot:e0,showPreview:function(){eQ(!0),setTimeout(function(){return eQ(!1)},2500)}})),e3.type===f.StepType.Image&&(0,p.jsx)(G,{hotspots:e3.hotspots,inEditMode:es,onHotspotClick:function(e){tz(),e8(e)},updateHotspot:en,deleteHotspot:eo,addHotspot:er,tracker:ew,isZoomActive:es?eY:tJ,zoomStyles:tq,stageRef:ek}),(null===(A=e3.cta)||void 0===A?void 0:A.id)&&!(void 0!==eu&&eu)&&(0,p.jsx)(ef,{stepId:e3.id,tracker:ew,cta:e3.cta,inEditMode:es,onReplay:function(){eA(ee.steps[0].id)},updateCTA:ei}),!es&&ee.showFlowNavIndicator&&!tF&&!(void 0===ed||ed)&&(0,p.jsx)(ev,{steps:tM,setPotentialNextStep:eq,indicatorColor:tA,navToStep:tL,navToNextStep:tB,navToPrevStep:tP,isWatermarkDisplayed:void 0===el||el})]}),tF&&!es&&(0,p.jsx)(L,{hotspot:(null==eR?void 0:eR.type)===f.StepType.Overlay?{label:"",bgColor:eR.buttonColor,textColor:eR.buttonColor?(0,w.pK)(eR.buttonColor):void 0}:null==eR?void 0:null===(M=eR.hotspots)||void 0===M?void 0:M[0],navToNextStep:function(){tz(),tB()},replay:function(){return tL(tM[0])}})]})}},10266:function(e,t,n){n.d(t,{Z:function(){return O}});var o,r=n(70865),i=n(96670),l=n(26297),a=n(66383),s=n(52322),u=n(269),c=n(72779),d=n.n(c),p=n(2784);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var v=function(e){return p.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},e),o||(o=p.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.167 5.833 12.25 1.75m0 0h-3.5m3.5 0v3.5M5.833 8.167 1.75 12.25m0 0h3.5m-3.5 0v-3.5",vectorEffect:"non-scaling-stroke"})))},h=n(34347),m=n(29578),g=n(53476),x=n(97818),y=n(64989),b=n(42303),w=n(49748),S=n(48878),j=n(16283),C=n(60058);n(96211);var k=n(52742),N=n(85819),Z=n(91914),I=n(71869),E=(0,p.forwardRef)(function(e,t){var n=e.title,o=e.className,l=e.allowFullscreen,c=e.hasBackgroundImage,f=e.inEditMode,x=void 0!==f&&f,S=e.darkMode,E=e.toggleFullscreen,T=e.onRefresh,O=e.onFlowEdit,F=e.onRender,R=e.children,A=(0,g.sJ)(w.H.stageDimensions),M=(0,g.sJ)(w.H.isFullscreen),H=(0,g.sJ)(w.H.isAutoplayActive),z=(0,g.sJ)(w.H.isOnLastStep),L=(0,a.Z)((0,g.FV)(w.H.isMuted),2),B=L[0],P=L[1],D=(0,p.useState)(!1),V=D[0],U=D[1],W=(0,p.useState)(A.height),_=W[0],q=W[1],J=(0,p.useState)(n),K=J[0],G=J[1],X=(0,p.useState)(!1),Y=X[0],Q=X[1],$=(0,p.useRef)(null),ee=(0,p.useRef)(null),et=(0,y.u)().flow,en=(0,b.a)(et,!1,!0).aspectRatio;return(0,p.useEffect)(function(){null==F||F()},[F]),(0,p.useEffect)(function(){return G(n)},[n]),(0,p.useEffect)(function(){var e,t=window.innerHeight,n=null===(e=ee.current)||void 0===e?void 0:e.offsetTop;n&&A.height+n>t&&!x?(U(!0),q(t-n)):(U(!1),q(A.height))},[x,A.height]),(0,p.useEffect)(function(){H||(z?setTimeout(function(){return Q(!0)},1e3):Q(!1))},[H,z]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n\n              @media (max-aspect-ratio: ".concat(1/en,") {\n                .aspect-ratio-box {\n                  width: 100%;\n                  max-height: -webkit-fill-available;\n                }\n\n              }\n\n              @media (min-aspect-ratio: ").concat(1/en,") {\n                .aspect-ratio-box\n                 {\n                  height: ").concat(x?"calc(100% - 142px)":"100%",";\n                  width: auto;\n                }\n\n              }\n              ")}),(0,s.jsxs)("div",{className:d()("relative flex flex-col aspect-ratio-box items-center box-border bg-clip-border",{"mt-10":x,"opacity-0":0===_,"!w-4/5 !h-auto":c&&!x,"shadow-lg m-auto":c&&!V,"shadow-lg mx-auto mt-14":c&&V,iframe:!x&&!M},o),ref:t,style:{aspectRatio:"".concat(1/en)},children:[(0,s.jsxs)("div",{className:d()("flex border border-b-0 rounded-t-lg overflow-hidden shrink-0 w-full h-10 box-border",{"w-full !absolute -top-10":x,"relative w-full":!x,"border-gray-200 bg-gray-100":!S,"border-[rgba(255,255,255,.1)] bg-gray-800":S}),children:[(0,s.jsx)("div",(0,i.Z)((0,r.Z)({className:"flex-[1_1_33%] h-full px-2 sm:px-3 flex items-center gap-[5px] sm:gap-2 relative"},(0,C.i8)(C.KN.BrowserWindow)),{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:d()("flex rounded-full h-3 w-3",{"bg-gray-900/[.32]":!S,"bg-white/[.32]":S})}),(0,s.jsx)("div",{className:d()("flex rounded-full h-3 w-3",{"bg-gray-900/[.24]":!S,"bg-white/[.24]":S})}),(0,s.jsx)("div",{className:d()("flex rounded-full h-3 w-3",{"bg-gray-900/[.16]":!S,"bg-white/[.16]":S})})]})})),(0,s.jsx)("div",{className:"flex-[1_1_33%] max-w-[50%] flex items-center justify-center",children:(0,s.jsxs)("div",{className:d()("flex items-center w-full justify-center relative h-[28px] rounded-lg text-[14px] p-1",{"bg-gray-200 text-gray-600":!S,"bg-gray-700 text-gray-300":S}),children:[(0,s.jsxs)("div",{className:"flex items-center w-full max-w-[80%] justify-center px-4",children:[(0,s.jsx)(k.Zp7,{className:"flex shrink-0 mr-2 text-gray-400"}),(0,s.jsx)("span",{className:d()("truncate relative overflow-hidden focus:outline-none font-[Inter] text-sm"),children:K})]}),!!T&&(0,s.jsx)("div",{className:d()("_replay flex items-center justify-center absolute right-1 cursor-pointer w-[20px] h-[20px] rounded-md transition-all group bg-transparent",{"text-gray-400 hover:bg-gray-300":!S,"text-gray-400 hover:bg-gray-600":S,"!bg-gray-300":!S&&z&&!H,"!bg-gray-600":S&&z&&!H}),ref:$,onMouseEnter:function(){return Q(!0)},onMouseLeave:function(){return Q(!1)},children:(0,s.jsx)(N.Fer,{className:d()("h-[18px] w-[18px] transition-all",{"group-hover:text-gray-600":!S,"group-hover:text-gray-300":S,"!text-gray-600":!S&&z&&!H,"!text-gray-300":S&&z&&!H}),onClick:T})})]})}),(0,s.jsx)("div",(0,i.Z)((0,r.Z)({className:"h-full flex-[1_1_33%] flex items-center justify-end px-2"},(0,C.i8)(C.KN.BrowserWindow)),{children:x?(0,s.jsx)(I.Z,{text:"Toggle light or dark mode",className:d()("",{"!bg-white !text-gray-900":S}),placement:"left",animation:"shift-away",children:(0,s.jsx)("div",{className:d()("rounded-lg flex w-6 h-6 items-center justify-center transition-colors group bg-transparent cursor-pointer",{"text-gray-400 hover:bg-gray-200":!S,"text-gray-400 hover:bg-gray-700":S}),onClick:function(){return null==O?void 0:O({flowWrapper:S?u.FlowWrapper.browserLight:u.FlowWrapper.browserDark})},children:(0,s.jsx)(Z.KYc,{className:d()("w-[14px] h-[14px] transition-colors",{"group-hover:text-gray-600":!S,"group-hover:text-gray-300":S})})})}):(0,s.jsxs)(s.Fragment,{children:[(0,j.Kt)(et)&&(0,s.jsx)(I.Z,{text:B?"Unmute":"Mute",disabled:x,className:d()("",{"!bg-white !text-gray-900":S}),placement:"right",animation:"shift-away",children:(0,s.jsx)("div",{className:d()("rounded-lg flex mr-1 w-6 h-6 items-center justify-center transition-colors group bg-transparent cursor-pointer",{"text-gray-400 hover:bg-gray-200":!S,"text-gray-400 hover:bg-gray-700":S}),onClick:function(){return P(!B)},children:B?(0,s.jsx)(h.Z,{className:d()("w-4 h-4 transition-colors",{"group-hover:text-gray-600":!S,"group-hover:text-gray-300":S})}):(0,s.jsx)(m.Z,{className:d()("w-4 h-4 transition-colors",{"group-hover:text-gray-600":!S,"group-hover:text-gray-300":S})})})}),(0,s.jsx)(I.Z,{text:"Fullscreen",disabled:x,className:d()("",{"!bg-white !text-gray-900":S}),placement:"right",animation:"shift-away",children:(0,s.jsx)("div",{className:d()("rounded-lg flex w-6 h-6 items-center justify-center transition-colors group bg-transparent",{"cursor-pointer":l,"text-gray-400 hover:bg-gray-200":!S,"text-gray-400 hover:bg-gray-700":S}),onClick:function(e){e.stopPropagation(),e.preventDefault(),l&&(null==E||E())},children:(0,s.jsx)(v,{className:d()("w-[14px] h-[14px] transition-colors",{"group-hover:text-gray-600":!S,"group-hover:text-gray-300":S})})})})]})}))]}),(0,s.jsx)("div",{className:d()("relative w-full h-full border border-t-0 flex rounded-b-lg",{"overflow-y-auto":V&&!x,"!overflow-hidden":!V&&!x,"bg-gray-100 bg-opacity-30 backdrop-blur-sm":c,"border-gray-200":!S,"border-gray-800":S}),style:{height:A.height},children:R})]}),!!T&&(0,s.jsx)(I.Z,{reference:$,text:"Replay",className:d()("",{"!bg-white !text-gray-900":S}),appendTo:function(){return document.body},placement:"right",visible:Y,getReferenceClientRect:function(){var e=document.querySelector("._replay").getBoundingClientRect();return{top:e.top,left:e.left,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},animation:"shift-away"})]})});E.displayName="BrowserWindow";var T=(0,p.forwardRef)(function(e,t){var n,o,c,f,k,N,Z,I,T,O,F,R,A,M=e.flowWrapper,H=e.exportMode,z=e.children,L=e.onRender,B=e.inEditMode,P=e.stageRef,D=(0,l.Z)(e,["flowWrapper","exportMode","children","onRender","inEditMode","stageRef"]),V=(0,g.sJ)(w.H.mobileInfo).isScreenSizeSmall,U=(0,y.u)(),W=U.flow,_=U.hasBackground,q=(0,b.a)(W,!1,!0).aspectRatio,J=(0,p.useState)(!1),K=J[0],G=J[1],X=M===u.FlowWrapper.none||V&&!B,Y=(0,a.Z)((0,g.FV)(w.H.isMuted),2),Q=Y[0],$=Y[1],ee=(f=(o={stageRef:P,enabled:!B}).stageRef,k=o.enabled,Z=(N=(0,a.Z)((0,g.FV)(w.H.isFullscreen),2))[0],I=N[1],O=(T=(0,a.Z)((0,g.FV)(w.H.stageDimensions),2))[0],F=T[1],(0,S.y)({disabled:O.width===(null===(c=f.current)||void 0===c?void 0:c.clientWidth)||!k,watchBody:!0,onResize:function(){f.current&&F({width:f.current.clientWidth,height:f.current.clientHeight})}}),R="undefined"!=typeof document&&(!!document.documentElement.requestFullscreen||!!document.documentElement.webkitRequestFullscreen||!!document.documentElement.msRequestFullscreen),A=(0,p.useCallback)(function(){var e=document.documentElement;R&&(Z?(document.exitFullscreen&&document.fullscreenElement?document.exitFullscreen().then(function(){return screen.orientation.unlock()}).catch(function(){}):document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),I(!1)):(e.requestFullscreen?e.requestFullscreen().then(function(){O.width>O.height&&(0,x.tq)()&&screen.orientation.lock("landscape")}).catch(function(){}):e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),I(!0)))},[Z,R,I,O.height,O.width,]),{isFullscreen:Z,toggleFullscreen:A}),et=ee.isFullscreen,en=ee.toggleFullscreen;return((0,p.useEffect)(function(){X&&(null==L||L()),G((0,x.tq)()&&(0,x.G6)())},[L,X]),X)?null!==(n=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n          \n            \n              @media (max-aspect-ratio: ".concat(1/q,") {\n                .aspect-ratio-box {\n                  width: 100%;\n                }\n              }\n\n              @media (min-aspect-ratio: ").concat(1/q,") {\n                .aspect-ratio-box {\n                  height: ").concat(B?"calc(100% - 142px)":"100%",";\n                  width: auto;\n                }\n              }\n\n              ")}),(0,s.jsxs)("div",{className:d()("relative aspect-ratio-box flex justify-center box-border bg-clip-border group/stage",{"items-start":V&&!B,"items-center":!V&&_,"!w-4/5 items-center !h-auto":!V&&_&&!B&&!et,iframe:!B&&!et,"!h-screen":et},D.className),ref:t,style:{aspectRatio:"".concat(1/q)},children:[!B&&!H&&(0,s.jsxs)("div",(0,i.Z)((0,r.Z)({className:"absolute top-3 right-3 flex"},(0,C.i8)(C.KN.FullscreenButton)),{children:[(0,j.Kt)(W)&&(0,s.jsx)("div",{className:"flex w-6 h-6 mr-1 items-center justify-center cursor-pointer rounded-lg text-white bg-gray-900/30 backdrop-blur-sm group-hover/stage:bg-gray-900/50 transition-all",onClick:function(){$(!Q)},children:Q?(0,s.jsx)(h.Z,{className:"w-3.5 h-3.5"}):(0,s.jsx)(m.Z,{className:"w-3.5 h-3.5"})}),(0,s.jsx)("div",{className:d()("flex w-6 h-6 items-center justify-center cursor-pointer rounded-lg text-white bg-gray-900/30 backdrop-blur-sm group-hover/stage:bg-gray-900/50 transition-all",{hidden:K}),onClick:function(){return en()},children:(0,s.jsx)(v,{className:"w-[14px] h-[14px]"})})]})),z]})]}))&&void 0!==n?n:null:(0,s.jsx)(E,(0,i.Z)((0,r.Z)({},D),{onRender:L,ref:t,darkMode:M===u.FlowWrapper.browserDark,inEditMode:B,toggleFullscreen:en,children:z}))});T.displayName="FlowWrapper";var O=T},26868:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(2784),r=n(28316);function i(e){var t=e.targetRef,n=e.children,i=(0,o.useState)(!1),l=i[0],a=i[1];return(0,o.useEffect)(function(){return a(!0)},[]),l&&t.current?(0,r.createPortal)(n,t.current):null}},42303:function(e,t,n){n.d(t,{$:function(){return f},a:function(){return v}});var o=n(98788),r=n(70865),i=n(5163),l=n(52094),a=n(2784),s=n(75475),u=n(97818),c=n(16283),d=n(17717),p=n(76790),f=2/3;function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],v=(0,s.Z)(),h=(0,a.useState)(),m=h[0],g=h[1],x=(0,a.useMemo)(function(){if(m)return m;if(e&&e.steps.length>0){var t=(0,c.ot)(e.steps);if((null==t?void 0:t.size)&&t.size.width>0&&t.size.height>0)return t.size;t&&u.jU&&!n&&(0,d.C0)(t).then(g)}},[m,e,n]),y=(0,a.useMemo)(function(){return n&&(null==e?void 0:e.aspectRatio)?e.aspectRatio:!x||x.width<=0||x.height<=0?(null==e?void 0:e.aspectRatio)||f:x.height/x.width},[x,null==e?void 0:e.aspectRatio,n]);(0,l.L)(function(){e&&!n&&v.userId&&Number.isFinite(y)&&y>0&&y!==e.aspectRatio&&y!==f&&e.update({aspectRatio:y},v.userId)},[e,y,v.userId,n]);var b=(0,a.useRef)(null);return(0,a.useEffect)(function(){e&&u.jU&&v.userId&&t&&b.current!==e.id&&e.steps.length>0&&e.steps.some(function(e){return!e.size||e.size.width<=0})&&(b.current=e.id,(0,o.Z)(function(){var t,n,o,l,a,s,u,c,f,h,m;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(t={},!((n=e.steps.filter(p.WI).filter(function(e){return!e.size||e.size.width<=0})).length>0))return[3,9];o=!0,l=!1,a=void 0,i.label=1;case 1:i.trys.push([1,6,7,8]),s=n[Symbol.iterator](),i.label=2;case 2:if(o=(u=s.next()).done)return[3,5];return c=u.value,[4,(0,d.C0)(c)];case 3:f=i.sent(),t[c.id]=f,i.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return h=i.sent(),l=!0,a=h,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(l)throw a}return[7];case 8:m=e.steps.map(function(e){return(0,r.Z)({},e,e.id in t?{size:t[e.id]}:{})}),e.update({steps:m},v.userId),i.label=9;case 9:return[2]}})})())},[e,t,v.userId]),{aspectRatio:y,dimensions:x}}},74876:function(e,t,n){n.d(t,{D:function(){return r}});var o=n(2784);function r(e){var t=(0,o.useRef)();return(0,o.useEffect)(function(){t.current=e},[e]),t.current}},48878:function(e,t,n){n.d(t,{y:function(){return c}});var o=n(98788),r=n(70865),i=n(5163),l=n(1316),a=n(52094),s=n(92642),u=n(2784);function c(e){var t=e.targetRef,c=e.disabled,d=void 0!==c&&c,p=e.fireOnMount,f=void 0!==p&&p,v=e.watchBody,h=void 0!==v&&v,m=e.observerOptions,g=e.onResize,x=e.debounce,y=(0,u.useRef)(null),b=(0,u.useState)({width:void 0,height:void 0}),w=b[0],S=b[1],j=(0,u.useCallback)(function(e){g?g(e):S(e)},[g]),C=(0,l.y)(function(e){g?g(e):S(e)},[g],x||0);return(0,a.L)(function(){if("undefined"!=typeof document&&!d){if(f){var e,r,l=h?document.body:y.current;if(l){var a=l.getBoundingClientRect(),u=a.width,c=a.height;x?C({width:u,height:c}):j({width:u,height:c})}}return(e=(0,o.Z)(function(){var e;return(0,i.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,3,,4]),window.ResizeObserver)return[3,2];return[4,n.e(5650).then(n.bind(n,35650))];case 1:o.sent().install(),o.label=2;case 2:return r=new window.ResizeObserver(function(e){e.forEach(function(e){var t=e&&e.contentRect||{},n=t.width,o=t.height;x?C({width:n,height:o}):j({width:n,height:o})})}),(null==t?void 0:t.current)?r.observe(null==t?void 0:t.current,m):y.current?r.observe(y.current,m):h&&r.observe(document.body,m),[3,4];case 3:return e=o.sent(),(0,s.Tb)(e),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)})(),function(){null==r||r.disconnect()}}},[m,d,C,j,f,h,x,t,]),(0,r.Z)({ref:y},w)}},78646:function(e,t,n){n.d(t,{ZP:function(){return m},_d:function(){return j},sc:function(){return C}});var o=n(70865),r=n(96670),i=n(50930),l=n(269),a=n(18149),s=n.n(a),u=n(75652),c=n.n(u),d=n(84636),p=n.n(d),f=n(2784),v=n(76790),h=n(79826);function m(e){var t,n,a,s=e.steps,u=e.activeStep,c=e.depth,d=void 0===c?2:c;u=null!==(a=null!=u?u:(0,v.kB)(s))&&void 0!==a?a:null;var p=(0,f.useMemo)(function(){return b(s,d)},[s,d]),h=(0,f.useMemo)(function(){var e,t,n,o,r;return e=s,t=p,n=u,o=x(t,n),r=y(t,n),{stepsFingerprint:k(t),activeStep:n,nextSteps:o,interactiveSteps:r,potentiallyNextStep:void 0,loadedStepIds:[],mountedVideosIds:[],loadQueue:n?w(e,n,2*e.length).filter(function(e){var t=e.id;return!(0,i.Z)(o).concat([n]).some(function(e){return e.id===t})}):[]}},[]),m=(0,f.useReducer)(g,h),S=m[0],j=m[1];(0,f.useEffect)(function(){var e,t;u&&((null===(e=S.activeStep)||void 0===e?void 0:e.id)!==u.id||(null===(t=S.activeStep)||void 0===t?void 0:t.url)!==u.url||k(p)!==S.stepsFingerprint)&&j({type:"setActive",stepsMap:p,activeStep:u})},[u,p,d,null===(t=S.activeStep)||void 0===t?void 0:t.id,null===(n=S.activeStep)||void 0===n?void 0:n.url,S.stepsFingerprint,]);var C=function(e){j({type:"setPotentiallyNextStep",stepsMap:p,potentiallyNextStep:e})},N=[];return S.activeStep&&(N=(0,i.Z)((0,i.Z)(S.nextSteps).concat([S.potentiallyNextStep]).filter(v.WI).map(function(e,t){return{step:e,isActive:S.activeStep.type===l.StepType.Overlay&&0===t,isLoaded:S.loadedStepIds.includes(e.id)}})).concat((0,i.Z)((0,v.WI)(S.activeStep)?[{step:S.activeStep,isActive:!0,isLoaded:S.loadedStepIds.includes(S.activeStep.id)},]:[])),S.mountedVideosIds.forEach(function(e){if(!N.some(function(t){return t.step.id===e})){var t=s.find(function(t){return t.id===e});t&&N.push({step:t,isActive:!1,isLoaded:S.loadedStepIds.includes(e)})}})),{renderedSteps:N.map(function(e){return(0,r.Z)((0,o.Z)({},e),{onLoad:function(){return j({type:"setLoaded",stepsMap:p,loadedStep:e.step})}})}),renderedInteractiveSteps:S.interactiveSteps.map(function(e){var t;return{step:e,isActive:(null===(t=S.activeStep)||void 0===t?void 0:t.id)===e.id}}),setPotentialNextStep:C}}function g(e,t){var n=t.stepsMap;switch(t.type){case"setActive":var a=x(n,t.activeStep),s=y(n,t.activeStep),u=c()((0,i.Z)(e.mountedVideosIds.filter(function(t){return e.loadedStepIds.includes(t)||a.some(function(e){return e.id===t})})).concat((0,i.Z)(a.filter(function(e){return e.type===l.StepType.Video&&!e.videoProcessing}).map(function(e){return e.id}))));return(0,r.Z)((0,o.Z)({},e),{stepsFingerprint:k(n),activeStep:t.activeStep,nextSteps:a,interactiveSteps:s,potentiallyNextStep:void 0,mountedVideosIds:u});case"setPotentiallyNextStep":if([null!==(f=null===(d=e.activeStep)||void 0===d?void 0:d.id)&&void 0!==f?f:"",].concat((0,i.Z)(e.nextSteps.map(function(e){return null==e?void 0:e.id}))).includes(t.potentiallyNextStep.id))return(0,o.Z)({},e);var d,f,v=t.potentiallyNextStep.type!==l.StepType.Video||e.mountedVideosIds.includes(t.potentiallyNextStep.id)?(0,i.Z)(e.mountedVideosIds):(0,i.Z)(e.mountedVideosIds).concat([t.potentiallyNextStep.id]);return(0,r.Z)((0,o.Z)({},e),{potentiallyNextStep:t.potentiallyNextStep,mountedVideosIds:v});case"setLoaded":if(e.loadedStepIds.includes(t.loadedStep.id))return(0,o.Z)({},e);var h,m=!!e.nextSteps.find(function(e){return e.id===t.loadedStep.id}),g=(0,i.Z)(e.nextSteps);if(m){var b,w=x(n,e.activeStep),S=e.loadQueue.shift();g=p()((0,i.Z)(w).concat((0,i.Z)([S].filter(function(t){var n;return!!t&&![null!==(b=null===(n=e.activeStep)||void 0===n?void 0:n.id)&&void 0!==b?b:"",].concat((0,i.Z)(e.loadedStepIds),(0,i.Z)(w.map(function(e){return e.id}))).includes(t.id)}))),"id")}var j=c()((0,i.Z)(e.mountedVideosIds).concat((0,i.Z)(g.filter(function(e){return e.type===l.StepType.Video}).map(function(e){return e.id}))));return(0,r.Z)((0,o.Z)({},e),{nextSteps:g,loadedStepIds:(null!==(h=e.loadedStepIds)&&void 0!==h?h:[]).concat(t.loadedStep.id),mountedVideosIds:j})}}var x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return[];var o=e[t.id];return o?n?o.after:(0,i.Z)(o.after).concat((0,i.Z)(o.before)):[]},y=function(e,t){if(!t)return[];var n=e[t.id];return n?[n.before.find(function(e){return e.type===l.StepType.Overlay}),n.step,].filter(function(e){return(null==e?void 0:e.type)===l.StepType.Overlay}):[]},b=function(e,t){if(!t||!e.length)return{};var n={},o=function(e){return n[e.id]||(n[e.id]={step:e,before:new Set,after:new Set}),n[e.id]};return e.forEach(function(n){var r=o(n);w(e,n,t).forEach(function(e){var t=o(e);!s()(e,n)&&(r.after.add(e),t.before.add(n))})}),Object.values(n).forEach(function(e){e.after.forEach(function(t){e.before.delete(t)})}),Object.keys(n).reduce(function(e,t){return e[t]={step:n[t].step,before:Array.from(n[t].before).reverse(),after:Array.from(n[t].after)},e},{})},w=function(e,t,n){for(var o=function(o){var l=new Set;i.forEach(function(i){var a=e.find(function(e){return e.id===i});a&&(t.id!==i&&r.set(i,a),o<n)&&S(e,a).forEach(function(e){l.add(e.id)})}),i=Array.from(l)},r=new Map,i=[t.id],a=0;a<=n;a++)o(a);return Array.from(r.values()).filter(function(e){return e.type!==l.StepType.Empty&&!e.videoProcessing})},S=function(e,t){var n,o=new Set,r=null;if(t.targetId&&t.targetId!==h.xv)r=null!==(n=e.find(function(e){var n=e.id;return t.targetId===n}))&&void 0!==n?n:null;else{var i=e.findIndex(function(e){var n=e.id;return t.id===n});r=j(e,i)}return r&&o.add(r),t.hotspots&&Array.isArray(t.hotspots)&&t.hotspots.forEach(function(n){var r,i=null;if(n.targetId&&n.targetId!==h.xv)i=null!==(r=e.find(function(e){var t=e.id;return n.targetId===t}))&&void 0!==r?r:null;else{var l=e.findIndex(function(e){var n=e.id;return t.id===n});i=j(e,l)}i&&o.add(i)}),Array.from(o)},j=function(e,t){if(t>=e.length-1)return null;var n=e[t+1];return n&&n.type!==l.StepType.Empty?n:j(e,t+1)},C=function(e){if(!e.length)return[];var t=(0,v.kB)(e);return t?[t,].concat((0,i.Z)(w(e,t,2*e.length))):[]},k=function(e){return Object.keys(e).join("-")}},15529:function(e,t,n){n.d(t,{q:function(){return r}});var o=n(33252),r=function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var i,l=e.steps[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var a=i.value,s=!0,u=!1,c=void 0;try{for(var d,p=a.hotspots[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;if(f&&f.bgColor)return{buttonBgColor:f.bgColor,buttonFgColor:f.textColor||o.defaultUserPrefs.textColor}}}catch(v){u=!0,c=v}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}}}catch(h){n=!0,r=h}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}}return{buttonBgColor:o.defaultUserPrefs.bgColor,buttonFgColor:o.defaultUserPrefs.textColor}}},33252:function(e,t,n){t.__esModule=!0,t.defaultTeamPrefs=t.defaultUserPrefs=void 0;var o=n(269);t.defaultUserPrefs={textColor:"#FFFFFF",bgColor:"#7E22CE",fontFamily:"Inter"},t.defaultTeamPrefs={fontFamily:"Inter",bgColor:"#2142E7",fgColor:"#FFFFFF",bgImage:void 0,wrapper:o.FlowWrapper.browserLight,showStartOverlay:!1,startOverlayButtonText:void 0,showFlowNavIndicator:!1}}}]);